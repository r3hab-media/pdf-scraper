<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#212529" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js'
    integrity='sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g=='
    crossorigin='anonymous' defer></script>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css'
    integrity='sha512-fw7f+TcMjTb7bpbLJZlP8g2Y4XcCyFZW8uy8HsRZsH/SwbMw0plKHFHr99DN3l04VsYNwvzicUX/6qurvIxbxw=='
    crossorigin='anonymous' />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <title>PDF Scraper</title>

  <style>
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      font-family: "Roboto", sans-serif;
      font-size: 16px;
    }

    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    footer {
      text-align: center;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    footer a {
      color: black;
      font-style: italic;
    }

    footer .fa-solid {
      margin: 0 .5rem;
    }

    @media screen and (min-width: 600px) {
      footer {
        flex-direction: row;
      }
    }
  </style>
</head>

<body>
  <main>
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-lg-8">
          <h1 class="display-5"><i class="fa-solid fa-layer-group"></i> Scrape<span class="fst-italic">Stack</span></h1>
          <p><strong>Scrape<span class="fst-italic">Stack</span></strong> is a web tool that helps you download all PDF
            files from a specified webpage into a single ZIP file. Just enter the URL of the webpage containing the PDFs
            and specify a name for the ZIP file. The tool will then gather all the PDFs from the page, bundle them into
            the ZIP file, and prompt you to download it, making it easier to save multiple PDFs at once.</p>
          <form action="/scrape" method="post" class="col-sm-12 col-md-6">
            <label for="url">Enter the URL:</label>
            <input type="text" id="url" name="url" class="form-control" required>
            <br>
            <div class="mb-3">
              <label class="form-label" for="fileType">Select file type to scrape:</label>
              <select id="fileType" name="fileType" class="form-select" required>
                <option value="pdf" selected>PDF (.pdf)</option>
                <option value="mp4">Video (.mp4)</option>
              </select>
            </div>

            <input type="text" id="zipName" name="zipName" placeholder="file_" class="form-control">
            <br>
            <button class="btn btn-dark" type="submit">Scrape</button>
          </form>
          <div class="mt-3">
            <button id="installBtn" class="btn btn-success d-none">Install ScrapeStack</button>
          </div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div class="front">
      Made with <i class="fa-solid fa-heart text-danger"></i> &amp; <i class="fa-solid fa-mug-hot text-warning"></i>
    </div>
    <div class="back">
      by <a href="https://jarednewnam.com">Jared Newnam</a>, <span id="thisYear"></span>
    </div>
  </footer>

  <script>
    // Register the service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').then(() => {
        console.log('Service Worker registered');
      });
    }

    const installBtn = document.getElementById('installBtn');
    let deferredPrompt = null;

    // Hide if already installed
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
    if (isStandalone) installBtn?.classList.add('d-none');

    // Show when installable
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn?.classList.remove('d-none');
    });

    installBtn?.addEventListener('click', async () => {
      installBtn.classList.add('d-none');
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
    });

    window.addEventListener('appinstalled', () => {
      installBtn?.classList.add('d-none');
      console.log('ScrapeStack installed');
    });
  </script>

  <!-- <script>
    if (location.hostname.endsWith('github.io')) {
      const f = document.querySelector('form');
      f.setAttribute('action', '#');
      f.addEventListener('submit', e => { e.preventDefault(); alert('Scraping runs in the local app.'); });
    }
  </script> -->
</body>

</html>